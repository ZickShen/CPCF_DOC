<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CPCF: test_inet.cpp</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CPCF<span id="projectnumber">&#160;Version 1.0</span>
   </div>
   <div id="projectbrief">Cross-Platform Core Foundation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/d7f/test_inet_8cpp-example.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">test_inet.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;../../core/inet/inet.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../../core/inet/datagram_pump.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;test.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../da/d42/namespaceinet.html">inet</a>;</div>
<div class="line"> </div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a>  a,b,c;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::socket()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>_call</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">static</span> DWORD _func(LPVOID p)</div>
<div class="line">        {</div>
<div class="line">            LPCSTR name = (LPCSTR)p;</div>
<div class="line">            <a id="_a1" name="_a1"></a><a class="code hl_class" href="../../d4/d5b/classinet_1_1_socket_event.html">SocketEvent</a> sevt;</div>
<div class="line">            sevt.<a id="a2" name="a2"></a><a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#a7e5a6ea82dafe5fa3a8912b1d7685132">Add</a>(a);</div>
<div class="line">            sevt.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#a7e5a6ea82dafe5fa3a8912b1d7685132">Add</a>(b);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span>(;;)</div>
<div class="line">            {</div>
<div class="line">                <a id="a3" name="a3"></a><a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(name&lt;&lt;<span class="stringliteral">&quot;: on call&quot;</span>);</div>
<div class="line">                <span class="keywordtype">int</span> ret = sevt.<a id="a4" name="a4"></a><a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#acb92f0cc62e63af3d2dc9b659a3436fe">WaitForEvents</a>();</div>
<div class="line">                <span class="keywordflow">if</span>(ret &gt; 0)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;ret;i++)</div>
<div class="line">                    {</div>
<div class="line">                        <a class="code hl_typedef" href="../../d2/d95/group__inet__h.html#gacff9c592b7f63e91d38fc09c8f47b421">SOCKET</a> s = sevt.<a id="a5" name="a5"></a><a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#ae81efc9fd8897acfa81170faedf95dd7">GetNextSocketEvent_Read</a>();</div>
<div class="line">                        <span class="keywordtype">char</span> message[512];</div>
<div class="line">                        <a id="_a6" name="_a6"></a><a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr;</div>
<div class="line">                        UINT l = 0;</div>
<div class="line">                        ((<a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a>&amp;)s).RecvFrom(message, <span class="keyword">sizeof</span>(message), l, addr);</div>
<div class="line">                        <span class="keywordflow">if</span>(l &lt;= 0)<span class="keywordflow">return</span> 0;</div>
<div class="line">                        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(name&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;<a id="_a7" name="_a7"></a><a class="code hl_class" href="../../d2/db4/classrt_1_1_string___ref.html">rt::String_Ref</a>(message, l)&lt;&lt;<span class="stringliteral">&quot;\ton &quot;</span>&lt;&lt;addr.<a id="a8" name="a8"></a><a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#ac824ca8cf1fba70ffdf4cb1d0482f8ff">GetPort</a>());</div>
<div class="line">                    }</div>
<div class="line"> </div>
<div class="line">                    <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(name&lt;&lt;<span class="stringliteral">&quot;: Sleep 2 sec&quot;</span>);</div>
<div class="line">                    <a id="a9" name="a9"></a><a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(2000);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> ips[4];</div>
<div class="line">    UINT co = <a id="a10" name="a10"></a><a class="code hl_function" href="../../d2/d95/group__inet__h.html#ga3e2a5ce39de8cd6b6d5ea87a1889e1ef">GetLocalAddresses</a>(ips, 4, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;en&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span>(UINT i=0; i&lt;co; i++)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(ips[i]);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr;</div>
<div class="line">    addr.<a id="a11" name="a11"></a><a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a1edcb93a71137b0c376f21383fb2f5f6">SetAsLocal</a>();</div>
<div class="line">        </div>
<div class="line">    addr.<a id="a12" name="a12"></a><a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(10000);</div>
<div class="line">    a.<a id="a13" name="a13"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(addr, SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">    addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(10001);</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(addr, SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">    addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(10002);</div>
<div class="line">    c.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(addr, SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">    <a id="_a14" name="_a14"></a><a class="code hl_class" href="../../d1/d15/classos_1_1_thread.html">os::Thread</a> th1,th2,th3,th4;</div>
<div class="line">    th1.<a id="a15" name="a15"></a><a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">Create</a>(_call::_func, (LPVOID)<span class="stringliteral">&quot;Thread 1&quot;</span>);</div>
<div class="line">    th2.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">Create</a>(_call::_func, (LPVOID)<span class="stringliteral">&quot;Thread 2&quot;</span>);</div>
<div class="line">    th3.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">Create</a>(_call::_func, (LPVOID)<span class="stringliteral">&quot;Thread 3&quot;</span>);</div>
<div class="line">    th4.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">Create</a>(_call::_func, (LPVOID)<span class="stringliteral">&quot;Thread 4&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(1500);</div>
<div class="line">    addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(10000);</div>
<div class="line">    c.<a id="a16" name="a16"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 1&quot;</span>,9, addr);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(500);</div>
<div class="line">    c.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 2&quot;</span>,9, addr);</div>
<div class="line">    addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(10001);</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 3&quot;</span>,9, addr);</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 4&quot;</span>,9, addr);</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 5&quot;</span>,9, addr);</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 6&quot;</span>,9, addr);</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;Message 7&quot;</span>,9, addr);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(8000);</div>
<div class="line"> </div>
<div class="line">    a.<a id="a17" name="a17"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#adaf85575e7cd6852d0d794b6120c00b4">Close</a>();</div>
<div class="line">    b.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#adaf85575e7cd6852d0d794b6120c00b4">Close</a>();</div>
<div class="line">    c.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#adaf85575e7cd6852d0d794b6120c00b4">Close</a>();</div>
<div class="line"> </div>
<div class="line">    th1.<a id="a18" name="a18"></a><a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a9f054b5584558abd41bd949c5f353a67">WaitForEnding</a>();</div>
<div class="line">    th2.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a9f054b5584558abd41bd949c5f353a67">WaitForEnding</a>();</div>
<div class="line">    th3.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a9f054b5584558abd41bd949c5f353a67">WaitForEnding</a>();</div>
<div class="line">    th4.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a9f054b5584558abd41bd949c5f353a67">WaitForEnding</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_socket_io(<span class="keywordtype">bool</span> recv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(recv)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a>  s;</div>
<div class="line">        <span class="comment">//s.Create(InetAddr(INADDR_ANY, 2000), SOCK_DGRAM);</span></div>
<div class="line">        <span class="keywordflow">if</span>(!s.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(<span class="stringliteral">&quot;10.0.0.15&quot;</span>, 2000), SOCK_DGRAM))<span class="keywordflow">return</span>;</div>
<div class="line">        <span class="comment">//if(!s.Create(InetAddr(&quot;192.168.1.111&quot;, 2000), SOCK_DGRAM))return;</span></div>
<div class="line">        s.<a id="a19" name="a19"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a3f4c686c6eacd4d18a2a0c4b89367552">EnableNonblockingIO</a>();</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="../../d4/d5b/classinet_1_1_socket_event.html">SocketEvent</a> sevt;</div>
<div class="line">        sevt.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#a7e5a6ea82dafe5fa3a8912b1d7685132">Add</a>(s);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> q = 0;</div>
<div class="line">        <span class="keywordflow">for</span>(;;)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> ret = sevt.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#acb92f0cc62e63af3d2dc9b659a3436fe">WaitForEvents</a>();</div>
<div class="line">            <span class="keywordflow">if</span>(ret &gt; 0)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;ret;i++)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code hl_typedef" href="../../d2/d95/group__inet__h.html#gacff9c592b7f63e91d38fc09c8f47b421">SOCKET</a> s = sevt.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#ae81efc9fd8897acfa81170faedf95dd7">GetNextSocketEvent_Read</a>();</div>
<div class="line">                    <span class="keywordtype">char</span> message[512];</div>
<div class="line">                    <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr;</div>
<div class="line">                    UINT l = 0;</div>
<div class="line">                    ((<a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a>&amp;)s).RecvFrom(message, <span class="keyword">sizeof</span>(message), l, addr);</div>
<div class="line">                    <span class="keywordflow">if</span>(l &lt;= 0)<span class="keywordflow">return</span>;</div>
<div class="line">                    <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(l&lt;&lt;<span class="stringliteral">&quot;\tfrom &quot;</span>&lt;&lt;<a id="_a20" name="_a20"></a><a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(addr)&lt;&lt;<span class="charliteral">&#39;\t&#39;</span>&lt;&lt;q++);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a>  s;</div>
<div class="line">        s.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(INADDR_ANY, 10001), SOCK_DGRAM);</div>
<div class="line">        s.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a3f4c686c6eacd4d18a2a0c4b89367552">EnableNonblockingIO</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(;;)</div>
<div class="line">        {</div>
<div class="line">            s.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;123&quot;</span>,3, <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(<span class="stringliteral">&quot;10.0.0.12&quot;</span>,10000));</div>
<div class="line">            <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(1000);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::socket_io()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="../../d1/d15/classos_1_1_thread.html">os::Thread</a> recv;</div>
<div class="line">    recv.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">Create</a>(</div>
<div class="line">        [](){</div>
<div class="line">            test_socket_io(<span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    test_socket_io(<span class="keyword">false</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::socket_socket_event()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a> recv[2];</div>
<div class="line">    recv[0].<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(<span class="stringliteral">&quot;11.1.1.22&quot;</span>, 20001), SOCK_DGRAM);</div>
<div class="line">    recv[1].<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(<span class="stringliteral">&quot;11.1.1.22&quot;</span>, 20002), SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="../../d4/d5b/classinet_1_1_socket_event.html">SocketEvent</a> se;</div>
<div class="line">    se.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#a7e5a6ea82dafe5fa3a8912b1d7685132">Add</a>(recv[0]);</div>
<div class="line">    se.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#a7e5a6ea82dafe5fa3a8912b1d7685132">Add</a>(recv[1]);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="../../d1/d15/classos_1_1_thread.html">os::Thread</a> sender;</div>
<div class="line">    sender.<a class="code hl_function" href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">Create</a>([](){</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> target[2] = {</div>
<div class="line">            {<span class="stringliteral">&quot;11.1.1.22&quot;</span>, 20001},</div>
<div class="line">            {<span class="stringliteral">&quot;11.1.1.22&quot;</span>, 20002}</div>
<div class="line">        };</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a> send;</div>
<div class="line">        send.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(<span class="stringliteral">&quot;11.1.1.22&quot;</span>, 20000), SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0;;i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">            <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(1000);</div>
<div class="line"> </div>
<div class="line">            UINT len = (UINT)(<a id="_a21" name="_a21"></a><a class="code hl_struct" href="../../dd/de2/structrt_1_1tos_1_1_static_string.html">rt::SS</a>(<span class="stringliteral">&quot;Msg &quot;</span>) + i).CopyTo(buf);</div>
<div class="line">            UINT idx = i%<a id="a22" name="a22"></a><a class="code hl_define" href="../../dd/d12/group__predefines.html#ga9879f8ef4e651f01c6888dd86b31b50c">sizeofArray</a>(target);</div>
<div class="line">            send.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(buf, len, target[idx]);</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;To &quot;</span>&lt;&lt;idx&lt;&lt;<span class="stringliteral">&quot;: &quot;</span>&lt;&lt;<a class="code hl_class" href="../../d2/db4/classrt_1_1_string___ref.html">rt::String_Ref</a>(buf, len));</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(;;)</div>
<div class="line">    {</div>
<div class="line">        UINT count = se.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#acb92f0cc62e63af3d2dc9b659a3436fe">WaitForEvents</a>();</div>
<div class="line">        <span class="keywordflow">if</span>(count&gt;0)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> buf[1024];</div>
<div class="line">            UINT read = 0;</div>
<div class="line">            <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> from;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span>(UINT i=0; i&lt;count; i++)</div>
<div class="line">            {</div>
<div class="line">                <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a> sock;</div>
<div class="line">                sock.<a id="a23" name="a23"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a06342d22bb7eab1a5e54d63af26936c6">Attach</a>(se.<a class="code hl_function" href="../../d4/d5b/classinet_1_1_socket_event.html#ae81efc9fd8897acfa81170faedf95dd7">GetNextSocketEvent_Read</a>());</div>
<div class="line">                sock.<a id="a24" name="a24"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a2d87734313ebde3898ea6041505feaee">RecvFrom</a>(buf, <span class="keyword">sizeof</span>(buf), read, from);</div>
<div class="line">                sock.<a id="a25" name="a25"></a><a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a1d0de66afe09fe65d9302433dc95e0b3">Detach</a>();  <span class="comment">// don&#39;t miss that</span></div>
<div class="line"> </div>
<div class="line">                <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<a class="code hl_class" href="../../d2/db4/classrt_1_1_string___ref.html">rt::String_Ref</a>(buf, read));</div>
<div class="line">            }       </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">volatile</span> <span class="keywordtype">int</span> packet_count = 0;</div>
<div class="line"><span class="keyword">volatile</span> <span class="keywordtype">int</span> packet_error = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>SocketIOObj: <span class="keyword">public</span> <a id="_a26" name="_a26"></a><a class="code hl_class" href="../../d0/d21/classinet_1_1_datagram_socket.html">DatagramSocket</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">void</span> OnRecv(<a id="_a27" name="_a27"></a><a class="code hl_struct" href="../../d3/da0/structinet_1_1_datagram.html">Datagram</a>* g)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(g)</div>
<div class="line">            <a id="a28" name="a28"></a><a class="code hl_function" href="../../d2/d9f/group__thread__primitive.html#gae6a9edf1f6f7cfe9f9a487fec043c323">os::AtomicIncrement</a>(&amp;packet_count);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            <a class="code hl_function" href="../../d2/d9f/group__thread__primitive.html#gae6a9edf1f6f7cfe9f9a487fec043c323">os::AtomicIncrement</a>(&amp;packet_error);</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>SocketIOObj_Routing: <span class="keyword">public</span> <a class="code hl_class" href="../../d0/d21/classinet_1_1_datagram_socket.html">DatagramSocket</a></div>
<div class="line">{</div>
<div class="line">    <a id="_a29" name="_a29"></a><a class="code hl_class" href="../../d2/d96/classrt_1_1_string.html">rt::String</a> Name;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> OnRecv(<a class="code hl_struct" href="../../d3/da0/structinet_1_1_datagram.html">Datagram</a>* g)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(g)</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;[&quot;</span>&lt;&lt;Name&lt;&lt;<span class="stringliteral">&quot;] Recv: \&quot;&quot;</span>&lt;&lt;<a id="_a30" name="_a30"></a><a class="code hl_struct" href="../../db/d9e/structrt_1_1tos_1_1_data_as_string.html">rt::DS</a>(g-&gt;<a id="a31" name="a31"></a><a class="code hl_variable" href="../../d3/da0/structinet_1_1_datagram.html#a417c817e94f6f7069a236ee965dde76d">RecvBuf</a>, g-&gt;<a id="a32" name="a32"></a><a class="code hl_variable" href="../../d3/da0/structinet_1_1_datagram.html#a76576e4457d15dcb7733d4a7b767fe8d">RecvSize</a>)&lt;&lt;<span class="stringliteral">&quot;\&quot; from: &quot;</span>&lt;&lt;<a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(g-&gt;<a id="a33" name="a33"></a><a class="code hl_variable" href="../../d3/da0/structinet_1_1_datagram.html#ad2f7fd4895d86811c4f04522fbf084de">PeerAddressV4</a>).<a id="a34" name="a34"></a><a class="code hl_function" href="../../d4/d8f/group__string__type.html#ga2fdd05ed7c3e515efa018bc917231524">TrimBefore</a>(<span class="charliteral">&#39;:&#39;</span>));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    SocketIOObj_Routing(<span class="keyword">const</span> <a class="code hl_class" href="../../d2/db4/classrt_1_1_string___ref.html">rt::String_Ref</a>&amp; name):Name(name){}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::recv_pump()</div>
<div class="line">{</div>
<div class="line">    {</div>
<div class="line">        <a id="_a35" name="_a35"></a><a class="code hl_class" href="../../d1/d11/classinet_1_1_datagram_pump.html">DatagramPump&lt;SocketIOObj_Routing&gt;</a>   core;</div>
<div class="line">        <a id="a36" name="a36"></a><a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga3675cf895544424c921cf6f8f5e91887">VERIFY</a>(core.<a id="a37" name="a37"></a><a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#acdd131f4e9dc06cc4109e344f0c73eb4">Init</a>());</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> remote_addr;</div>
<div class="line">        remote_addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a1edcb93a71137b0c376f21383fb2f5f6">SetAsLocal</a>();</div>
<div class="line">        remote_addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(33010);</div>
<div class="line">        SocketIOObj_Routing remote(<span class="stringliteral">&quot;Remote&quot;</span>);</div>
<div class="line">        remote.Create(remote_addr);</div>
<div class="line">        core.<a id="a38" name="a38"></a><a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#ab2e988428a1b16379a3403edd400db23">AddObject</a>(&amp;remote);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> local_addr;</div>
<div class="line">        local_addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a1edcb93a71137b0c376f21383fb2f5f6">SetAsLocal</a>();</div>
<div class="line">        local_addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(33000);</div>
<div class="line">        SocketIOObj_Routing local(<span class="stringliteral">&quot;Local&quot;</span>);</div>
<div class="line">        local.Create(local_addr, <span class="keyword">true</span>);</div>
<div class="line">        core.<a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#ab2e988428a1b16379a3403edd400db23">AddObject</a>(&amp;local);</div>
<div class="line">        </div>
<div class="line">        <a id="a39" name="a39"></a><a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga12e244ee457ec371bbadf2f027e1d440">_LOGC</a>(<span class="stringliteral">&quot;Local: &quot;</span>&lt;&lt;<a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(local_addr));</div>
<div class="line">        </div>
<div class="line">        <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> local_send_addr;</div>
<div class="line">        local_send_addr.<a id="a40" name="a40"></a><a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#ac4146aaf8850f2a5e511db6894eaec7b">SetAsAny</a>();</div>
<div class="line">        local_send_addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(33000);</div>
<div class="line">        <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a> local_send;</div>
<div class="line">        local_send.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(local_send_addr, SOCK_DGRAM, <span class="keyword">true</span>);</div>
<div class="line">    </div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;5; i++)</div>
<div class="line">        {</div>
<div class="line"> </div>
<div class="line">        local_send.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(<span class="stringliteral">&quot;from any&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;from any&quot;</span>)-1, remote_addr);</div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(100);</div>
<div class="line"> </div>
<div class="line">        local.SendTo(<span class="stringliteral">&quot;from local&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;from local&quot;</span>)-1, remote_addr);</div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(100);</div>
<div class="line"> </div>
<div class="line">        remote.SendTo(<span class="stringliteral">&quot;from remote&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;from remote&quot;</span>)-1, local_addr);</div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(1000);</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        core.<a id="a41" name="a41"></a><a class="code hl_function" href="../../d3/de6/classinet_1_1_async_datagram_core_base.html#abf854628a94246086944e76206e562d4">Term</a>();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    {   <a id="_a42" name="_a42"></a><a class="code hl_class" href="../../d3/db8/classrt_1_1_buffer.html">rt::Buffer&lt;SocketIOObj&gt;</a> sockets;</div>
<div class="line">        sockets.<a id="a43" name="a43"></a><a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#ga3b88c05d4a3725c1fe885a653527ecdb">SetSize</a>(100);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> port_base = 21000;</div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a id="a44" name="a44"></a><a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr(<span class="stringliteral">&quot;0.0.0.0&quot;</span>, port_base + i);</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga3675cf895544424c921cf6f8f5e91887">VERIFY</a>(sockets[i].Create(addr));</div>
<div class="line">            sockets[i].SetBufferSize(2000);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="../../d1/d11/classinet_1_1_datagram_pump.html">DatagramPump&lt;SocketIOObj&gt;</a>   core;</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga3675cf895544424c921cf6f8f5e91887">VERIFY</a>(core.<a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#acdd131f4e9dc06cc4109e344f0c73eb4">Init</a>());</div>
<div class="line">    </div>
<div class="line">        <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr;</div>
<div class="line">        addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a1edcb93a71137b0c376f21383fb2f5f6">SetAsLocal</a>();</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a> sender;</div>
<div class="line">        sender.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(addr, SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(UINT q=0; q&lt;3; q++)</div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(port_base + i);</div>
<div class="line">            sockets[i].SendTo(&amp;i, 4, addr);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(2000);</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;1 Packet Recv = &quot;</span>&lt;&lt;packet_count&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;packet_error);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            core.<a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#ab2e988428a1b16379a3403edd400db23">AddObject</a>(&amp;sockets[i]);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(2000);</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;2 Packet Recv = &quot;</span>&lt;&lt;packet_count&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;packet_error);</div>
<div class="line">    </div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(port_base + i);</div>
<div class="line">            sockets[i].SendTo(&amp;i, 4, addr);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(2000);</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;3 Packet Recv = &quot;</span>&lt;&lt;packet_count&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;packet_error);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">SetPort</a>(port_base + i);</div>
<div class="line">            sender.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(&amp;i, 4, addr);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(2000);</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;4 Packet Recv = &quot;</span>&lt;&lt;packet_count&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;packet_error);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::recv_pump_server()</div>
<div class="line">{</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../d3/db8/classrt_1_1_buffer.html">rt::Buffer&lt;SocketIOObj&gt;</a> sockets;</div>
<div class="line">        sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#ga3b88c05d4a3725c1fe885a653527ecdb">SetSize</a>(100);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> port_base = 21000;</div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr(<span class="stringliteral">&quot;0.0.0.0&quot;</span>, port_base + i);</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga3675cf895544424c921cf6f8f5e91887">VERIFY</a>(sockets[i].Create(addr));</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        packet_count = 0;</div>
<div class="line">        packet_error = 0;</div>
<div class="line">        <a class="code hl_class" href="../../d1/d11/classinet_1_1_datagram_pump.html">DatagramPump&lt;SocketIOObj&gt;</a>   core;</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga3675cf895544424c921cf6f8f5e91887">VERIFY</a>(core.<a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#acdd131f4e9dc06cc4109e344f0c73eb4">Init</a>());</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(UINT i=0; i&lt;sockets.<a class="code hl_function" href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">GetSize</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">            core.<a class="code hl_function" href="../../d1/d11/classinet_1_1_datagram_pump.html#ab2e988428a1b16379a3403edd400db23">AddObject</a>(&amp;sockets[i]);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(3000);</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;Packet Recv = &quot;</span>&lt;&lt;packet_count&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;packet_error);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::recv_pump_client()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> port_base = 21000;</div>
<div class="line">    <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> addr;</div>
<div class="line">    addr.<a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a1edcb93a71137b0c376f21383fb2f5f6">SetAsLocal</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="../../db/dff/classinet_1_1_socket.html">Socket</a> sender;</div>
<div class="line">    sender.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">Create</a>(addr, SOCK_DGRAM);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(UINT i=0; i &lt; 100; i++)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a> toaddr(<span class="stringliteral">&quot;192.168.211.151&quot;</span>, port_base + i);</div>
<div class="line">        <span class="keywordflow">for</span>(UINT j = 0; j &lt; 10; j++)</div>
<div class="line">        {</div>
<div class="line">            sender.<a class="code hl_function" href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">SendTo</a>(&amp;i, 4, toaddr);</div>
<div class="line">        }</div>
<div class="line">        <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;send to:&quot;</span>&lt;&lt; <a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(toaddr));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rt::UnitTests::net_interfaces()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> scan = [](){</div>
<div class="line">        <a id="_a45" name="_a45"></a><a class="code hl_class" href="../../d0/d1a/classrt_1_1_buffer_ex.html">rt::BufferEx&lt;NetworkInterface&gt;</a>  nic;</div>
<div class="line">        NetworkInterfaces::Populate(nic, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it : nic)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;NIC: &lt;&quot;</span>&lt;&lt;it.Name&lt;&lt;<span class="stringliteral">&quot;&gt; T&quot;</span>&lt;&lt;(it.Type&amp;<a id="a46" name="a46"></a><a class="code hl_enumvalue" href="../../d2/d95/group__inet__h.html#gga1183005993079c1ff0a3344e2d8346cfa00c019edf9071722694ac12c927d63fd">NITYPE_MASK</a>)&lt;&lt;<span class="charliteral">&#39; &#39;</span>&lt;&lt;(it.IsOnline()?<span class="stringliteral">&quot;online&quot;</span>:<span class="stringliteral">&quot;offline&quot;</span>));</div>
<div class="line">            <span class="keywordflow">if</span>(!it.IsOnline())<span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span>(UINT i=0; i&lt;it.v4Count; i++)</div>
<div class="line">                <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;\tIPv4:&quot;</span>&lt;&lt;<a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(it.v4[i].Local,0)).<a id="a47" name="a47"></a><a class="code hl_function" href="../../d4/d8f/group__string__type.html#ga1591469c602954fd11356881c7d07a3f">TrimAfterReverse</a>(<span class="charliteral">&#39;:&#39;</span>)&lt;&lt;<span class="charliteral">&#39;/&#39;</span></div>
<div class="line">                              &lt;&lt;<a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(<a class="code hl_struct" href="../../d9/dac/structinet_1_1_inet_addr.html">InetAddr</a>(it.v4[i].Boardcast,0)).<a class="code hl_function" href="../../d4/d8f/group__string__type.html#ga1591469c602954fd11356881c7d07a3f">TrimAfterReverse</a>(<span class="charliteral">&#39;:&#39;</span>));</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span>(UINT i=0; i&lt;it.v6Count; i++)</div>
<div class="line">            {</div>
<div class="line">                <a id="_a48" name="_a48"></a><a class="code hl_class" href="../../dc/d64/classinet_1_1_inet_addr_t.html">InetAddrV6</a> addr;</div>
<div class="line">                addr.<a id="a49" name="a49"></a><a class="code hl_function" href="../../dc/d64/classinet_1_1_inet_addr_t.html#a3742f197bbc1508299d1c2b2054cb589">SetBinaryAddress</a>(it.v6[i].Local);</div>
<div class="line">                <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a>(<span class="stringliteral">&quot;\tIPv6:&quot;</span>&lt;&lt;<a class="code hl_struct" href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a>(addr).TrimAfterReverse(<span class="charliteral">&#39;:&#39;</span>)&lt;&lt;</div>
<div class="line">                              ((it.Type&amp;<a id="a50" name="a50"></a><a class="code hl_enumvalue" href="../../d2/d95/group__inet__h.html#gga1183005993079c1ff0a3344e2d8346cfa34f4302fa58ae9d0d8c3386d86915a6f">NITYPE_MULTICAST</a>)?<span class="stringliteral">&quot;/multicast&quot;</span>:<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    scan();</div>
<div class="line">    <a id="_a51" name="_a51"></a><a class="code hl_class" href="../../de/d7c/classinet_1_1_network_interfaces.html">NetworkInterfaces</a> evt;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(;;)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(100);</div>
<div class="line">        <span class="keywordflow">if</span>(evt.<a id="a52" name="a52"></a><a class="code hl_function" href="../../de/d7c/classinet_1_1_network_interfaces.html#a528d9ffcb48016ad173e5543198b42a3">GetState</a>() == NetworkInterfaces::Reconfiguring)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga12e244ee457ec371bbadf2f027e1d440">_LOGC</a>(<span class="stringliteral">&quot;\n\nNetwork Interface reconfiguring ...&quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span>(;;)</div>
<div class="line">            {</div>
<div class="line">                <a class="code hl_function" href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a>(100);</div>
<div class="line">                <span class="keywordflow">if</span>(evt.<a class="code hl_function" href="../../de/d7c/classinet_1_1_network_interfaces.html#a528d9ffcb48016ad173e5543198b42a3">GetState</a>() == NetworkInterfaces::Reconfigured)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code hl_define" href="../../d4/d55/group__runtime__base.html#ga12e244ee457ec371bbadf2f027e1d440">_LOGC</a>(<span class="stringliteral">&quot;Reconfigured:&quot;</span>);</div>
<div class="line">                    scan();</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclassinet_1_1_async_datagram_core_base_html_abf854628a94246086944e76206e562d4"><div class="ttname"><a href="../../d3/de6/classinet_1_1_async_datagram_core_base.html#abf854628a94246086944e76206e562d4">inet::AsyncDatagramCoreBase::Term</a></div><div class="ttdeci">void Term()</div></div>
<div class="ttc" id="aclassinet_1_1_datagram_pump_html"><div class="ttname"><a href="../../d1/d11/classinet_1_1_datagram_pump.html">inet::DatagramPump</a></div><div class="ttdoc">Datagram Pump.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00236">datagram_pump.h:237</a></div></div>
<div class="ttc" id="aclassinet_1_1_datagram_pump_html_ab2e988428a1b16379a3403edd400db23"><div class="ttname"><a href="../../d1/d11/classinet_1_1_datagram_pump.html#ab2e988428a1b16379a3403edd400db23">inet::DatagramPump::AddObject</a></div><div class="ttdeci">bool AddObject(SocketObject *obj)</div><div class="ttdoc">lifecycle is not maintained by RecvPump</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00300">datagram_pump.h:300</a></div></div>
<div class="ttc" id="aclassinet_1_1_datagram_pump_html_acdd131f4e9dc06cc4109e344f0c73eb4"><div class="ttname"><a href="../../d1/d11/classinet_1_1_datagram_pump.html#acdd131f4e9dc06cc4109e344f0c73eb4">inet::DatagramPump::Init</a></div><div class="ttdeci">bool Init(UINT concurrency=0, UINT mtu=UDP_Optimal_Size, UINT stack_size=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00282">datagram_pump.h:282</a></div></div>
<div class="ttc" id="aclassinet_1_1_datagram_socket_html"><div class="ttname"><a href="../../d0/d21/classinet_1_1_datagram_socket.html">inet::DatagramSocket</a></div><div class="ttdoc">Non-blocking I/O is used, the # of UDP packet is not equal to # of events by epoll/kevent.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00129">datagram_pump.h:130</a></div></div>
<div class="ttc" id="aclassinet_1_1_inet_addr_t_html"><div class="ttname"><a href="../../dc/d64/classinet_1_1_inet_addr_t.html">inet::InetAddrT&lt; sockaddr_in6 &gt;</a></div></div>
<div class="ttc" id="aclassinet_1_1_inet_addr_t_html_a1edcb93a71137b0c376f21383fb2f5f6"><div class="ttname"><a href="../../dc/d64/classinet_1_1_inet_addr_t.html#a1edcb93a71137b0c376f21383fb2f5f6">inet::InetAddrT::SetAsLocal</a></div><div class="ttdeci">bool SetAsLocal(bool no_loopback=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00166">inet.h:166</a></div></div>
<div class="ttc" id="aclassinet_1_1_inet_addr_t_html_a3742f197bbc1508299d1c2b2054cb589"><div class="ttname"><a href="../../dc/d64/classinet_1_1_inet_addr_t.html#a3742f197bbc1508299d1c2b2054cb589">inet::InetAddrT::SetBinaryAddress</a></div><div class="ttdeci">auto &amp; SetBinaryAddress(LPCVOID addr_bin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00221">inet.h:221</a></div></div>
<div class="ttc" id="aclassinet_1_1_inet_addr_t_html_a49c0398faa01cc45e48b6556ecffc95f"><div class="ttname"><a href="../../dc/d64/classinet_1_1_inet_addr_t.html#a49c0398faa01cc45e48b6556ecffc95f">inet::InetAddrT::SetPort</a></div><div class="ttdeci">auto &amp; SetPort(const WORD ushPort=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00222">inet.h:222</a></div></div>
<div class="ttc" id="aclassinet_1_1_inet_addr_t_html_ac4146aaf8850f2a5e511db6894eaec7b"><div class="ttname"><a href="../../dc/d64/classinet_1_1_inet_addr_t.html#ac4146aaf8850f2a5e511db6894eaec7b">inet::InetAddrT::SetAsAny</a></div><div class="ttdeci">auto &amp; SetAsAny()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00168">inet.h:168</a></div></div>
<div class="ttc" id="aclassinet_1_1_inet_addr_t_html_ac824ca8cf1fba70ffdf4cb1d0482f8ff"><div class="ttname"><a href="../../dc/d64/classinet_1_1_inet_addr_t.html#ac824ca8cf1fba70ffdf4cb1d0482f8ff">inet::InetAddrT::GetPort</a></div><div class="ttdeci">WORD GetPort() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00227">inet.h:227</a></div></div>
<div class="ttc" id="aclassinet_1_1_network_interfaces_html"><div class="ttname"><a href="../../de/d7c/classinet_1_1_network_interfaces.html">inet::NetworkInterfaces</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00424">inet.h:425</a></div></div>
<div class="ttc" id="aclassinet_1_1_network_interfaces_html_a528d9ffcb48016ad173e5543198b42a3"><div class="ttname"><a href="../../de/d7c/classinet_1_1_network_interfaces.html#a528d9ffcb48016ad173e5543198b42a3">inet::NetworkInterfaces::GetState</a></div><div class="ttdeci">ConfigState GetState() const</div></div>
<div class="ttc" id="aclassinet_1_1_socket_event_html"><div class="ttname"><a href="../../d4/d5b/classinet_1_1_socket_event.html">inet::SocketEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00462">inet.h:463</a></div></div>
<div class="ttc" id="aclassinet_1_1_socket_event_html_a7e5a6ea82dafe5fa3a8912b1d7685132"><div class="ttname"><a href="../../d4/d5b/classinet_1_1_socket_event.html#a7e5a6ea82dafe5fa3a8912b1d7685132">inet::SocketEvent::Add</a></div><div class="ttdeci">void Add(SOCKET s)</div></div>
<div class="ttc" id="aclassinet_1_1_socket_event_html_acb92f0cc62e63af3d2dc9b659a3436fe"><div class="ttname"><a href="../../d4/d5b/classinet_1_1_socket_event.html#acb92f0cc62e63af3d2dc9b659a3436fe">inet::SocketEvent::WaitForEvents</a></div><div class="ttdeci">INT WaitForEvents(UINT timeout=INFINITE)</div><div class="ttdoc">num of sockets ready: 0 for timeout and SOCKET_ERROR for error</div></div>
<div class="ttc" id="aclassinet_1_1_socket_event_html_ae81efc9fd8897acfa81170faedf95dd7"><div class="ttname"><a href="../../d4/d5b/classinet_1_1_socket_event.html#ae81efc9fd8897acfa81170faedf95dd7">inet::SocketEvent::GetNextSocketEvent_Read</a></div><div class="ttdeci">SOCKET GetNextSocketEvent_Read()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00503">inet.h:503</a></div></div>
<div class="ttc" id="aclassinet_1_1_socket_html"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html">inet::Socket</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00272">inet.h:273</a></div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_a06342d22bb7eab1a5e54d63af26936c6"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#a06342d22bb7eab1a5e54d63af26936c6">inet::Socket::Attach</a></div><div class="ttdeci">void Attach(SOCKET hSocket)</div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_a1d0de66afe09fe65d9302433dc95e0b3"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#a1d0de66afe09fe65d9302433dc95e0b3">inet::Socket::Detach</a></div><div class="ttdeci">SOCKET Detach()</div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_a2d87734313ebde3898ea6041505feaee"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#a2d87734313ebde3898ea6041505feaee">inet::Socket::RecvFrom</a></div><div class="ttdeci">bool RecvFrom(LPVOID pData, UINT len, UINT &amp;len_out, InetAddr &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00293">inet.h:293</a></div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_a3f4c686c6eacd4d18a2a0c4b89367552"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#a3f4c686c6eacd4d18a2a0c4b89367552">inet::Socket::EnableNonblockingIO</a></div><div class="ttdeci">void EnableNonblockingIO(bool enable=true)</div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_a57126a1bec5708d9d2225e7f33934741"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#a57126a1bec5708d9d2225e7f33934741">inet::Socket::SendTo</a></div><div class="ttdeci">bool SendTo(LPCVOID pData, UINT len, const InetAddr &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00292">inet.h:292</a></div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_ad5149429c91572301fce6cd17288a23f"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#ad5149429c91572301fce6cd17288a23f">inet::Socket::Create</a></div><div class="ttdeci">bool Create(const InetAddr &amp;BindTo, int nSocketType=SOCK_STREAM, bool reuse_addr=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00286">inet.h:286</a></div></div>
<div class="ttc" id="aclassinet_1_1_socket_html_adaf85575e7cd6852d0d794b6120c00b4"><div class="ttname"><a href="../../db/dff/classinet_1_1_socket.html#adaf85575e7cd6852d0d794b6120c00b4">inet::Socket::Close</a></div><div class="ttdeci">void Close()</div></div>
<div class="ttc" id="aclassos_1_1_thread_html"><div class="ttname"><a href="../../d1/d15/classos_1_1_thread.html">os::Thread</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db7/multi__thread_8h_source.html#l00058">multi_thread.h:59</a></div></div>
<div class="ttc" id="aclassos_1_1_thread_html_a233ba0e44b407e5b68f9859ab970ca5f"><div class="ttname"><a href="../../d1/d15/classos_1_1_thread.html#a233ba0e44b407e5b68f9859ab970ca5f">os::Thread::Create</a></div><div class="ttdeci">bool Create(LPVOID obj, const THISCALL_MFPTR &amp;on_run, LPVOID param=nullptr, ULONGLONG CPU_affinity=0xffffffffffffffffULL, UINT stack_size=0)</div></div>
<div class="ttc" id="aclassos_1_1_thread_html_a9f054b5584558abd41bd949c5f353a67"><div class="ttname"><a href="../../d1/d15/classos_1_1_thread.html#a9f054b5584558abd41bd949c5f353a67">os::Thread::WaitForEnding</a></div><div class="ttdeci">bool WaitForEnding(UINT time_wait_ms=INFINITE, bool terminate_if_timeout=false)</div></div>
<div class="ttc" id="aclassrt_1_1_buffer_ex_html"><div class="ttname"><a href="../../d0/d1a/classrt_1_1_buffer_ex.html">rt::BufferEx</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd4/buffer__type_8h_source.html#l00436">buffer_type.h:437</a></div></div>
<div class="ttc" id="aclassrt_1_1_buffer_html"><div class="ttname"><a href="../../d3/db8/classrt_1_1_buffer.html">rt::Buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd4/buffer__type_8h_source.html#l00326">buffer_type.h:327</a></div></div>
<div class="ttc" id="aclassrt_1_1_string___ref_html"><div class="ttname"><a href="../../d2/db4/classrt_1_1_string___ref.html">rt::String_Ref</a></div><div class="ttdoc">String_Ref represent a string with length, the string is not necessary zero-terminated.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1d/string__type_8h_source.html#l01282">string_type.h:1283</a></div></div>
<div class="ttc" id="aclassrt_1_1_string_html"><div class="ttname"><a href="../../d2/d96/classrt_1_1_string.html">rt::String</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1d/string__type_8h_source.html#l01673">string_type.h:1674</a></div></div>
<div class="ttc" id="agroup__buffer__type_html_ga3b88c05d4a3725c1fe885a653527ecdb"><div class="ttname"><a href="../../d0/d9f/group__buffer__type.html#ga3b88c05d4a3725c1fe885a653527ecdb">rt::Buffer::SetSize</a></div><div class="ttdeci">bool SetSize(SIZE_T co=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd4/buffer__type_8h_source.html#l00383">buffer_type.h:383</a></div></div>
<div class="ttc" id="agroup__buffer__type_html_gad7443dc12fc2a4fd9107fe00c3d96a58"><div class="ttname"><a href="../../d0/d9f/group__buffer__type.html#gad7443dc12fc2a4fd9107fe00c3d96a58">rt::Buffer_Ref::GetSize</a></div><div class="ttdeci">t_Index GetSize() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd4/buffer__type_8h_source.html#l00106">buffer_type.h:106</a></div></div>
<div class="ttc" id="agroup__inet__h_html_ga3e2a5ce39de8cd6b6d5ea87a1889e1ef"><div class="ttname"><a href="../../d2/d95/group__inet__h.html#ga3e2a5ce39de8cd6b6d5ea87a1889e1ef">inet::GetLocalAddresses</a></div><div class="ttdeci">UINT GetLocalAddresses(InetAddrT&lt; sockaddr_in &gt; *pOut, UINT out_size, bool no_loopback, InetAddrT&lt; sockaddr_in &gt; *pOut_Broadcast=nullptr, DWORD *subnet_mask=nullptr, LPCSTR interface_prefix=nullptr, rt::String *if_names=nullptr)</div></div>
<div class="ttc" id="agroup__inet__h_html_gacff9c592b7f63e91d38fc09c8f47b421"><div class="ttname"><a href="../../d2/d95/group__inet__h.html#gacff9c592b7f63e91d38fc09c8f47b421">inet::SOCKET</a></div><div class="ttdeci">::SOCKET SOCKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00088">inet.h:88</a></div></div>
<div class="ttc" id="agroup__inet__h_html_gga1183005993079c1ff0a3344e2d8346cfa00c019edf9071722694ac12c927d63fd"><div class="ttname"><a href="../../d2/d95/group__inet__h.html#gga1183005993079c1ff0a3344e2d8346cfa00c019edf9071722694ac12c927d63fd">inet::NITYPE_MASK</a></div><div class="ttdeci">@ NITYPE_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00390">inet.h:390</a></div></div>
<div class="ttc" id="agroup__inet__h_html_gga1183005993079c1ff0a3344e2d8346cfa34f4302fa58ae9d0d8c3386d86915a6f"><div class="ttname"><a href="../../d2/d95/group__inet__h.html#gga1183005993079c1ff0a3344e2d8346cfa34f4302fa58ae9d0d8c3386d86915a6f">inet::NITYPE_MULTICAST</a></div><div class="ttdeci">@ NITYPE_MULTICAST</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00393">inet.h:393</a></div></div>
<div class="ttc" id="agroup__kernel_html_gacb88f0ebe81200cdabda7a636876cdaf"><div class="ttname"><a href="../../d9/d7c/group__kernel.html#gacb88f0ebe81200cdabda7a636876cdaf">os::Sleep</a></div><div class="ttdeci">bool Sleep(DWORD msec=INFINITE, const bool *interrupt_flag=nullptr)</div></div>
<div class="ttc" id="agroup__predefines_html_ga9879f8ef4e651f01c6888dd86b31b50c"><div class="ttname"><a href="../../dd/d12/group__predefines.html#ga9879f8ef4e651f01c6888dd86b31b50c">sizeofArray</a></div><div class="ttdeci">#define sizeofArray(array_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db2/predefines_8h_source.html#l00197">predefines.h:197</a></div></div>
<div class="ttc" id="agroup__runtime__base_html_ga12e244ee457ec371bbadf2f027e1d440"><div class="ttname"><a href="../../d4/d55/group__runtime__base.html#ga12e244ee457ec371bbadf2f027e1d440">_LOGC</a></div><div class="ttdeci">#define _LOGC(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5e/runtime__base_8h_source.html#l00206">runtime_base.h:206</a></div></div>
<div class="ttc" id="agroup__runtime__base_html_ga3675cf895544424c921cf6f8f5e91887"><div class="ttname"><a href="../../d4/d55/group__runtime__base.html#ga3675cf895544424c921cf6f8f5e91887">VERIFY</a></div><div class="ttdeci">#define VERIFY(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5e/runtime__base_8h_source.html#l00251">runtime_base.h:251</a></div></div>
<div class="ttc" id="agroup__runtime__base_html_ga7263964d3be25fc05cdc28e40b88409e"><div class="ttname"><a href="../../d4/d55/group__runtime__base.html#ga7263964d3be25fc05cdc28e40b88409e">_LOG</a></div><div class="ttdeci">#define _LOG(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5e/runtime__base_8h_source.html#l00196">runtime_base.h:196</a></div></div>
<div class="ttc" id="agroup__string__type_html_ga1591469c602954fd11356881c7d07a3f"><div class="ttname"><a href="../../d4/d8f/group__string__type.html#ga1591469c602954fd11356881c7d07a3f">rt::String_Base::TrimAfterReverse</a></div><div class="ttdeci">t_StrRef TrimAfterReverse(const CharacterSet &amp;seps) const</div><div class="ttdoc">separator will also be trimmed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1d/string__type_8h_source.html#l01202">string_type.h:1202</a></div></div>
<div class="ttc" id="agroup__string__type_html_ga2fdd05ed7c3e515efa018bc917231524"><div class="ttname"><a href="../../d4/d8f/group__string__type.html#ga2fdd05ed7c3e515efa018bc917231524">rt::String_Base::TrimBefore</a></div><div class="ttdeci">t_StrRef TrimBefore(const CharacterSet &amp;seps) const</div><div class="ttdoc">separator will also be trimmed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1d/string__type_8h_source.html#l01166">string_type.h:1166</a></div></div>
<div class="ttc" id="agroup__thread__primitive_html_gae6a9edf1f6f7cfe9f9a487fec043c323"><div class="ttname"><a href="../../d2/d9f/group__thread__primitive.html#gae6a9edf1f6f7cfe9f9a487fec043c323">os::AtomicIncrement</a></div><div class="ttdeci">FORCEINL int AtomicIncrement(volatile int *theValue)</div><div class="ttdoc">All Atomic operation return the value after operation, EXCEPT AtomicOr and AtomicAnd.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dea/thread__primitive_8h_source.html#l00078">thread_primitive.h:78</a></div></div>
<div class="ttc" id="anamespaceinet_html"><div class="ttname"><a href="../../da/d42/namespaceinet.html">inet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00044">datagram_pump.h:45</a></div></div>
<div class="ttc" id="astructinet_1_1_datagram_html"><div class="ttname"><a href="../../d3/da0/structinet_1_1_datagram.html">inet::Datagram</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00108">datagram_pump.h:109</a></div></div>
<div class="ttc" id="astructinet_1_1_datagram_html_a417c817e94f6f7069a236ee965dde76d"><div class="ttname"><a href="../../d3/da0/structinet_1_1_datagram.html#a417c817e94f6f7069a236ee965dde76d">inet::Datagram::RecvBuf</a></div><div class="ttdeci">LPBYTE RecvBuf</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00110">datagram_pump.h:110</a></div></div>
<div class="ttc" id="astructinet_1_1_datagram_html_a76576e4457d15dcb7733d4a7b767fe8d"><div class="ttname"><a href="../../d3/da0/structinet_1_1_datagram.html#a76576e4457d15dcb7733d4a7b767fe8d">inet::Datagram::RecvSize</a></div><div class="ttdeci">DWORD RecvSize</div><div class="ttdoc">Last recv.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00112">datagram_pump.h:112</a></div></div>
<div class="ttc" id="astructinet_1_1_datagram_html_ad2f7fd4895d86811c4f04522fbf084de"><div class="ttname"><a href="../../d3/da0/structinet_1_1_datagram.html#ad2f7fd4895d86811c4f04522fbf084de">inet::Datagram::PeerAddressV4</a></div><div class="ttdeci">InetAddr PeerAddressV4</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/datagram__pump_8h_source.html#l00116">datagram_pump.h:116</a></div></div>
<div class="ttc" id="astructinet_1_1_inet_addr_html"><div class="ttname"><a href="../../d9/dac/structinet_1_1_inet_addr.html">inet::InetAddr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00258">inet.h:259</a></div></div>
<div class="ttc" id="astructrt_1_1tos_1_1_data_as_string_html"><div class="ttname"><a href="../../db/d9e/structrt_1_1tos_1_1_data_as_string.html">rt::tos::DataAsString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/string__type__ops_8h_source.html#l00100">string_type_ops.h:101</a></div></div>
<div class="ttc" id="astructrt_1_1tos_1_1_static_string_html"><div class="ttname"><a href="../../dd/de2/structrt_1_1tos_1_1_static_string.html">rt::tos::StaticString</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5f/string__type__ops_8h_source.html#l00084">string_type_ops.h:85</a></div></div>
<div class="ttc" id="astructrt_1_1tos_1_1ip_html"><div class="ttname"><a href="../../d5/d45/structrt_1_1tos_1_1ip.html">rt::tos::ip</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4a/inet_8h_source.html#l00564">inet.h:565</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
